# Tidying UCI HAR Data

The scope of this project is to obtain and "tidy" data from a study of human activity based on measurments of accelerometer data from devices used by the subjects of the study.

These data can be obtained in their original form from the [UCI archive here](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones), or by examining the course project description in Coursera: [here](https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip)

## Raw Data

Data pertinent to this project reside in a number of files in the source data set.

* train/subject_train.txt lists the IDs of the subjects corresponding to the rows in the train/X_train.txt and train/y_train.txt files. Similarly for the "*_test.txt" files
* train/X_train.txt contains one 561-element feature vector per measurement; similarly for test/X_test.txt
* train/y_train.txt contains one 561-element feature vector per measurment; similarly for test/y_test.txt
* features.txt contains a list of identifiers for the elements in each feature vector
* activity_labels.txt contains a mapping of integers to string activity keys

## Processing and Data Transformations

   1. The test and train feature vector files are read into data frames and merged into a unified data frame.
   2. The feature label data file is read into a data frame and a transform removing the characters "(", ")", "-" and "," is applied to the label column.
   3. The transformed feature labels are set as the test/train data column names.
   4. The transformed feature labels are filtered to remove labels that are not in the set to be retained, as identified by the regular expression "(mean$|mean[xyz]$|std$|std[xyz]$)", and then the unified data set has columns not matching the reduced set removed.
   5. The subject train and test data are read into data frames and merged in the same order as the feature data frames were merged (e.g. `rbind(x_train, x_test)` implies `rbind(subject_train, subject_test)`), then added as a column to the unified frame.
   6. The test and train label files are merged in the same order as the feature vector files, then added to the unified set as a column, "activityid".
   7. The activity label data are read into a data frame and a transform removing the "_" character and shifting each character to lowercase is applied, then joined to the unified set on the rows matching the "activityid" column numerical value.
   8. A second data frame is generated by aggregating the average of each variable per subject per activity.
   9. The unified data frame and the second aggregate data frame are written to csv files.

## Code Book

### Measures Feature File

  Two variables identify the subject and activity:	

  * subjectid - The ID of the subject for which data apply	
  * activity - The activity identified

  The remaining 73 variables are of the form <variablename>(mean|std)[xyz]*

  * The <variablename> component describes the measured variable, e.g. "angleygravity" describes the y component of gravity
  * The (mean|std) regular expression indicates EITHER a "mean" or "std" measurement, e.g. "angleygravitymean" is the mean of the y component of gravity and "angleygravitystd" is the standard deviation of the y component of gravity
  * The trailing [xyz] appear in measures that are destructured vectors (i.e. vectores broken into their x,y,z components); for example the three "tbodygyrojerkstdx", "tbodygyrojerkstdy", "tbodygyrojerkstdz" variables are the standard deviations of the x-, y-, and z-components of the body gyroscope jerk (derivative of acceleration).

### Summary File

    As above, except that the 73 measure variable labels identify the *mean* of each measure grouped by subject and activity. For example all the values for a given subject and activity pair have been averaged by column, producing just one entry in the data for that subject/activity pair.

For further reference, see the "source_reference.txt" file, which is a re-print of the "README.txt" file from the source data.